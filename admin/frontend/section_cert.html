<h1>
    Cert List
    <span class="desc-text">Management of Certifications</span>
</h1>

<div class="text-end my-2">
    <button class="btn btn-xs btn-outline btn-success" @click="addCertRecordFromUI()">
        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M11 12H3" />
            <path d="M16 6H3" />
            <path d="M16 18H3" />
            <path d="M18 9v6" />
            <path d="M21 12h-6" />
        </svg>
        <p>Add Record</p>
    </button>
</div>

<table class="table table-xs text-center not-prose border border-base-content/5">
    <thead class="bg-base-200 text-base-content font-bold">
        <tr>
            <th>
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="m3 16 4 4 4-4" />
                    <path d="M7 20V4" />
                    <path d="m21 8-4-4-4 4" />
                    <path d="M17 4v16" />
                </svg>
            </th>
            <th>DOMAIN</th>
            <th>ADMIN EMAIL</th>
            <th>AUTO RENEWAL</th>
            <th>STATUS</th>
            <th>REGISTERED TIME</th>
            <th>RECENT RENEWAL TIME</th>
            <th>(RE)NEWAL TOOLS<br>(Let's Encrypt)</th>
            <th>DELETE</th>
        </tr>
    </thead>
    <tbody x-sort="onSorted($item, $position, main.nginx, 'cert')" x-sort:config="{handle: '.drag-handle'}">
        <template x-for="(item, index) in main.nginx.cert">
            <tr x-sort:item="index+1">
                <td>
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="mr-2 text-warning cursor-move drag-handle" x-sort:handle>
                        <path d="m3 16 4 4 4-4" />
                        <path d="M7 20V4" />
                        <path d="m21 8-4-4-4 4" />
                        <path d="M17 4v16" />
                    </svg>
                </td>
                <td><span x-text="item.domain"></span><div x-show="item.wildcard=='true'" x-text="`(*.${item.domain})`"></div></td>
                <td>
                    <span x-text="item.adminEmail"></span>
                    <button class="btn btn-xs btn-soft btn-default" @click="changeCertEmail(item)">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" />
                            <path
                                d="M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z" />
                        </svg>
                        <p>Change</p>
                    </button>
                </td>
                <td>
                    <select class="select select-xs" x-model="item.autoRenewal">
                        <option value="false">NO (manual renewal)</option>
                        <option value="true">YES (auto renewal)</option>
                    </select>
                </td>
                <td><span class="loading loading-spinner loading-sm" x-show="item.renewing"></span><span x-show="!item.renewing">OK</span></td>
                <td x-text="item.created"></td>
                <td x-text="item.modified"></td>
                <td>
                    <button class="btn btn-xs btn-soft btn-success" @click="renewCertHTTP(item)">
                        by HTTP
                    </button>
                    <button class="btn btn-xs btn-soft btn-accent" @click="renewCertDNS(item, false)">
                        by DNS
                    </button>
                    <button class="btn btn-xs btn-soft btn-accent" @click="renewCertDNS(item, true)">
                        by DNS (wildcard)
                    </button>
                </td>
                <td>
                    <button class="btn btn-xs btn-soft btn-error" @click="deleteCert(item)">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M10 11v6" />
                            <path d="M14 11v6" />
                            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6" />
                            <path d="M3 6h18" />
                            <path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
                        </svg>
                        <p>Delete</p>
                    </button>
                </td>
            </tr>
        </template>
    </tbody>
</table>

<div class="text-end my-4">
    <button class="btn btn-primary" @click="saveConfig()">
        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path
                d="M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z" />
            <path d="M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7" />
            <path d="M7 3v4a1 1 0 0 0 1 1h7" />
        </svg>
        <p>All save to disk</p>
    </button>
</div>

<div role="alert" class="alert alert-soft alert-info text-xs my-2">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-info h-6 w-6 shrink-0">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
    </svg>
    <p>
        Let's Encrypt DNS challenge is a method of domain ownership verification.
        It requires adding a specific TXT record to your domain's DNS settings.
        This proves to the Certificate Authority that you control the domain.
        For more details, refer to Let's Encrypt's official documentation:
        <a href='https://letsencrypt.org/docs/challenge-types/#dns-01-challenge' target="_blank">
            https://letsencrypt.org/docs/challenge-types/#dns-01-challenge
        </a>
    </p>
</div>