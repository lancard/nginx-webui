<h1>
    Domain/URL Handlers
    <span class="desc-text">nginx server directive management</span>
</h1>

<div class="text-end my-2">
    <button class="btn btn-xs btn-outline btn-success" @click="addSite()">
        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M11 12H3" />
            <path d="M16 6H3" />
            <path d="M16 18H3" />
            <path d="M18 9v6" />
            <path d="M21 12h-6" />
        </svg>
        <p>Add New Domain Handler</p>
    </button>
</div>

<ul class="not-prose" x-sort="onSorted($item, $position, main.nginx, 'site')" x-sort:config="{handle: '.drag-handle'}">
    <template x-for="(site, index) in main.nginx.site">
        <li x-sort:item="index+1">
            <div class="card shadow mt-4 not-prose bg-info-content/50 border border-info">
                <div class="card-header bg-base-300 pl-4 flex w-full items-center py-1 bg-info/50 rounded-box">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="mr-2 text-warning cursor-move drag-handle" x-sort:handle>
                        <path d="m3 16 4 4 4-4" />
                        <path d="M7 20V4" />
                        <path d="m21 8-4-4-4 4" />
                        <path d="M17 4v16" />
                    </svg>
                    <div class="card-title text-sm mb-1 mr-4 fw-bold" x-text="site.siteName">test_domain_https</div>
                    <button class="btn btn-xs btn-soft btn-success" @click="addLocation(site)">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" />
                            <path
                                d="M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z" />
                        </svg>
                        <p>Add Location</p>
                    </button>
                    <div class="ml-auto pr-4 pb-1">
                        <details class="dropdown dropdown-end">
                            <summary class="btn btn-xs btn-soft btn-default">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
                                    fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                    stroke-linejoin="round">
                                    <path d="M4 12h16" />
                                    <path d="M4 18h16" />
                                    <path d="M4 6h16" />
                                </svg>
                            </summary>
                            <ul class="menu dropdown-content bg-base-100 rounded-box z-1 w-52 shadow-lg text-xs">
                                <li>
                                    <a @click="renameSite(site)">
                                        Rename Domain Handler
                                    </a>
                                </li>
                                <li>
                                    <a @click="deleteSite(site)">
                                        Delete Domain Handler
                                    </a>
                                </li>
                            </ul>
                        </details>
                    </div>
                </div>
                <div class="card-body bg-base-200/50 flex flex-row">
                    <div class="w-1/2">
                        <label class="input">
                            <span class="label">DOMAIN NAME</span>
                            <input type="text" x-model="site.serverName">
                        </label>
                        <fieldset class="fieldset mt-2">
                            <legend class="fieldset-legend p-0 text-base-content/50">
                                Additional Server Directive Statement
                            </legend>
                            <textarea class="textarea w-full" rows="10" x-model="site.siteConfig"></textarea>
                        </fieldset>
                    </div>
                    <div class="w-1/2">
                        <ul x-sort="onSorted($item, $position, site, 'locations')" x-sort:config="{handle: '.drag-handle'}">
                            <template x-for="(item, index) in site.locations">
                                <li x-sort:item="index+1">
                                    <div class="card border border-info/70 mt-2">
                                        <div class="card-header flex items-center px-6 pt-3">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                                                stroke-linecap="round" stroke-linejoin="round"
                                                class="mr-4 text-warning cursor-move drag-handle" x-sort:handle>
                                                <path d="m3 16 4 4 4-4" />
                                                <path d="M7 20V4" />
                                                <path d="m21 8-4-4-4 4" />
                                                <path d="M17 4v16" />
                                            </svg>
                                            <div class="w-full">
                                                <span class="text-primary" x-text="item.address"></span>
                                                <button class="btn btn-xs btn-soft btn-default mx-4"
                                                    @click="renameLocation(item)">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                        viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                        <path
                                                            d="M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" />
                                                        <path
                                                            d="M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z" />
                                                    </svg>
                                                    <p>Rename (Change location rule)</p>
                                                </button>
                                            </div>
                                            <div class="flex justify-end">
                                                <button class="btn btn-xs btn-soft btn-error"
                                                    @click="deleteLocation(site, item)">
                                                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                                                        viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                        <path d="M10 11v6" />
                                                        <path d="M14 11v6" />
                                                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6" />
                                                        <path d="M3 6h18" />
                                                        <path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2" />
                                                    </svg>
                                                    <p>Delete Location</p>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="card-body pt-0">
                                            <fieldset class="fieldset mt-2">
                                                <legend class="fieldset-legend p-0 text-base-content/50">URL
                                                    Path(Location) Configuration
                                                </legend>
                                                <textarea class="textarea w-full" rows="10"
                                                    x-model="item.config"></textarea>
                                            </fieldset>
                                        </div>
                                    </div>
                                </li>
                            </template>
                        </ul>
                    </div>
                </div>
            </div>
        </li>
    </template>
</ul>